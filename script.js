/* ================= Dados de Modelos ================= */
/* ================= Dados de Modelos (12 Modelos para Teste) ================= */
const data = [
Â  {
Â  Â  id: 1,
Â  Â  name: 'Luna Andrade',
Â  Â  city: 'Porto Alegre',
Â  Â  age: 25,
Â  Â  height: 170,
Â  Â  thumb: "img/models02.jpeg",
Â  Â  tags: ['Morena', 'Tatuada', 'Acompanhante'],
    bio: 'Modelo de alto padrÃ£o, especialista em acompanhamento discreto.', lat: -30.03, lng: -51.22
Â  },
Â  {
Â  Â  id: 2,
Â  Â  name: 'Valentina Rocha',
Â  Â  city: 'Caxias do Sul',
Â  Â  age: 28,
Â  Â  height: 165,
Â  Â  thumb: 'https://images.unsplash.com/photo-1607746882042-944635dfe10e?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Loira', 'VIP', 'Massagem'],
    bio: 'Atendimento exclusivo com foco em massagens relaxantes.', lat: -29.17, lng: -51.18
Â  },
Â  {
Â  Â  id: 3,
Â  Â  name: 'Sofia Menezes',
Â  Â  city: 'Pelotas',
Â  Â  age: 22,
Â  Â  height: 168,
Â  Â  thumb: 'https://images.unsplash.com/photo-1594824476967-48c8b9642737?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Morena Clara', 'UniversitÃ¡ria', 'Atendimento Hotel'],
    bio: 'Companhia discreta para eventos e viagens a negÃ³cios.', lat: -31.77, lng: -52.33
Â  },
Â  {
Â  Â  id: 4,
Â  Â  name: 'Camila Duarte',
Â  Â  city: 'Santa Maria',
Â  Â  age: 27,
Â  Â  height: 172,
Â  Â  thumb: 'https://images.unsplash.com/photo-1614289321713-d8b14bfb47e8?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Morena', 'Modelo', 'Discreta'],
    bio: 'ElegÃ¢ncia e sofisticaÃ§Ã£o em todos os encontros.', lat: -29.69, lng: -53.80
Â  },
Â  {
Â  Â  id: 5,
Â  Â  name: 'Isadora Lima',
Â  Â  city: 'Novo Hamburgo',
Â  Â  age: 24,
Â  Â  height: 166,
Â  Â  thumb: 'https://images.unsplash.com/photo-1603791452906-bb9d88f6fbc6?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Ruiva', 'Atendimento Domiciliar', 'VIP'],
    bio: 'Personalidade vibrante e atendimento inesquecÃ­vel.', lat: -29.69, lng: -51.13
Â  },
Â  {
Â  Â  id: 6,
Â  Â  name: 'Beatriz Faria',
Â  Â  city: 'GravataÃ­',
Â  Â  age: 30,
Â  Â  height: 175,
Â  Â  thumb: 'https://images.unsplash.com/photo-1614287146579-64f19af244d4?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Loira', 'Experiente', 'Companhia'],
    bio: 'ExperiÃªncia e profissionalismo em todos os serviÃ§os.', lat: -29.94, lng: -50.99
Â  },
Â  // --- NOVOS 6 MODELOS PARA TESTE ---
Â  {
Â  Â  id: 7,
Â  Â  name: 'Helena Paz',
Â  Â  city: 'Canoas',
Â  Â  age: 23,
Â  Â  height: 169,
Â  Â  thumb: 'https://images.unsplash.com/photo-1609143926590-349079f82631?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Oriental', 'Novata', 'Massagem TÃ¢ntrica'],
    bio: 'Beleza exÃ³tica e serviÃ§os focados em relaxamento profundo.', lat: -29.92, lng: -51.18
Â  },
Â  {
Â  Â  id: 8,
Â  Â  name: 'Gabriela Silva',
Â  Â  city: 'Porto Alegre',
Â  Â  age: 26,
Â  Â  height: 173,
Â  Â  thumb: 'https://images.unsplash.com/photo-1594747761005-2b02e700a40d?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Negra', 'Corpo Sarado', 'Viagens'],
    bio: 'Companhia para eventos e viagens nacionais e internacionais.', lat: -30.06, lng: -51.21
Â  },
Â  {
Â  Â  id: 9,
Â  Â  name: 'Renata Castro',
Â  Â  city: 'Rio Grande',
Â  Â  age: 32,
Â  Â  height: 167,
Â  Â  thumb: 'https://images.unsplash.com/photo-1594833246738-92a083236e88?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Madura', 'Experiente', 'Atendimento Domiciliar'],
    bio: 'Profissionalismo e discriÃ§Ã£o para clientes exigentes.', lat: -32.03, lng: -52.09
Â  },
Â  {
Â  Â  id: 10,
Â  Â  name: 'Nicole Ferreira',
Â  Â  city: 'Passo Fundo',
Â  Â  age: 21,
Â  Â  height: 162,
Â  Â  thumb: 'https://images.unsplash.com/photo-1614287146579-64f19af244d4?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Ruiva', 'UniversitÃ¡ria', 'Fotos/VÃ­deos'],
    bio: 'Energia jovem e serviÃ§os sob demanda.', lat: -28.27, lng: -52.40
Â  },
Â  {
Â  Â  id: 11,
Â  Â  name: 'Carolina Mello',
Â  Â  city: 'Lajeado',
Â  Â  age: 29,
Â  Â  height: 171,
Â  Â  thumb: 'https://images.unsplash.com/photo-1614289321713-d8b14bfb47e8?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Loira', 'Tatuada', 'VIP'],
    bio: 'Atendimento de luxo para clientes de alto padrÃ£o.', lat: -29.46, lng: -51.96
Â  },
Â  {
Â  Â  id: 12,
Â  Â  name: 'Duda Costa',
Â  Â  city: 'Novo Hamburgo',
Â  Â  age: 24,
Â  Â  height: 168,
Â  Â  thumb: 'https://images.unsplash.com/photo-1603791452906-bb9d88f6fbc6?auto=format&fit=crop&w=800&q=60',
Â  Â  tags: ['Morena', 'Modelo', 'Companhia'],
    bio: 'PresenÃ§a marcante e personalidade envolvente.', lat: -29.69, lng: -51.13
Â  }
];
// --- FIM DOS DADOS ---

/* ================= Elementos DOM ================= */
// O ID 'carousel' foi removido do HTML e nÃ£o serÃ¡ mais usado
const modal = document.getElementById('modal');
const closeModalBtn = document.getElementById('closeModal');

// FunÃ§Ã£o para construir o HTML de um Ãºnico card
function createCardHTML(model) {
Â  Â  // Cria as tags
    // Adicionando city, age, e height para as informaÃ§Ãµes do card
    const info = `${model.city} â€¢ ${model.age} anos â€¢ ${model.height}cm`;
Â  Â  const tagsHTML = model.tags.map(tag => `<span class="tag">${tag}</span>`).join('');

Â  Â  return `
Â  Â  Â  Â  <div class="card" data-id="${model.id}">
Â  Â  Â  Â  Â  Â  <div class="thumb" style="background-image: url('${model.thumb}');"></div>
Â  Â  Â  Â  Â  Â  <div class="meta">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="name">${model.name}</span>
                <button class='pill' data-id='${model.id}'>Ver</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p class="info">${info}</p>
Â  Â  Â  Â  Â  Â  <div class="tags">${tagsHTML}</div>
Â  Â  Â  Â  </div>
Â  Â  `;
}

/**
 * @description Renderiza 12 modelos aleatÃ³rios (6 por linha) nas duas linhas rolÃ¡veis.
 */
function renderTwoRows() {
    const row1 = document.getElementById('carousel-row-1');
    const row2 = document.getElementById('carousel-row-2');
    
    if (!data || data.length === 0 || !row1 || !row2) {
        console.error('Dados de modelo nÃ£o encontrados ou containers de linha ausentes.');
        return;
    }

    // CRÃTICO: 1. Embaralha e seleciona 12 modelos
    const shuffledData = [...data]
        .sort(() => 0.5 - Math.random()) // Embaralha o array
        .slice(0, 12); // Seleciona atÃ© 12 modelos (6 por linha)

    // 2. Limpa os containers
    row1.innerHTML = '';
    row2.innerHTML = '';

    // 3. DIVISÃƒO CRÃTICA DOS DADOS: Encontra o Ã­ndice do meio do grupo de 12
    const totalModels = shuffledData.length;
    const halfIndex = Math.ceil(totalModels / 2); // SerÃ¡ 6 se houver 12 modelos

    // Cria dois novos arrays:
    const dataRow1 = shuffledData.slice(0, halfIndex); // Modelos para a Linha 1 (mÃ¡x. 6)
    const dataRow2 = shuffledData.slice(halfIndex); Â  Â // Modelos para a Linha 2 (mÃ¡x. 6)

    // 4. Renderiza a PRIMEIRA LINHA
    dataRow1.forEach(model => {
        row1.insertAdjacentHTML('beforeend', createCardHTML(model));
    });

    // 5. Renderiza a SEGUNDA LINHA
    dataRow2.forEach(model => {
        row2.insertAdjacentHTML('beforeend', createCardHTML(model));
    });
    
    console.log(`Carrossel Renderizado: ${dataRow1.length} cards na Linha 1 e ${dataRow2.length} na Linha 2, totalizando ${totalModels} modelos aleatÃ³rios.`);
}

// A funÃ§Ã£o render() antiga foi removida.
/* ================= Fim Render Carrossel Modelos ================= */


/* ================= Dados de Shorts (Exemplo) ================= */
// CRIE UM ARRAY DE DADOS PARA OS SHORTS (Se nÃ£o tiver, use um mockup)
const shortsData = [
Â  { video: 'videos/modelo1.mp4', title: 'Valentina' },
Â  { video: 'videos/modelo2.mp4', title: 'Rafaela' },
Â  { video: 'videos/modelo3.mp4', title: 'Luna' },
Â  { video: 'videos/modelo4.mp4', title: 'Isabella' },
Â  { video: 'videos/modelo5.mp4', title: 'Giovanna' },
Â  { video: 'videos/modelo6.mp4', title: 'Helena' },
Â  // ... adicione mais itens para garantir que a randomizaÃ§Ã£o funcione ...
];

/* ================= Renderiza Shorts RandÃ´micos ================= */
function renderShorts() {
    const shortsContainer = document.querySelector('.shorts-carousel');
    if (!shortsContainer) return;

    shortsContainer.innerHTML = '';

    // 1. Embaralha e seleciona 6 itens
    const randomShorts = [...shortsData]
        .sort(() => 0.5 - Math.random()) 
        .slice(0, 6);

    // 2. Renderiza os 6 cards
    randomShorts.forEach(item => {
        const card = document.createElement('div');
        card.className = 'short-card';
        card.innerHTML = `
            <video 
                src="${item.video || 'videos/placeholder.mp4'}" 
                muted 
                loop 
                playsinline 
                preload="metadata"
            ></video>
            <h3>${item.title}</h3>
        `;
        shortsContainer.appendChild(card);
        
        // ðŸš¨ NOVO: Garante o autoplay e evita travamento
        const videoElement = card.querySelector('video');
        videoElement.addEventListener('loadeddata', () => {
            // Tenta dar play no vÃ­deo. O 'muted' Ã© necessÃ¡rio para autoplay funcionar.
            videoElement.play().catch(error => {
                // Console.warn para o caso de o navegador bloquear o autoplay
                console.warn("Autoplay bloqueado pelo navegador.", error);
            });
        }, { once: true });
    });
}
/* ================= NavegaÃ§Ã£o do Carrossel ================= */
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const scrollAmount = 300; // Define o valor de rolagem

// FunÃ§Ã£o para rolar ambas as linhas
function scrollCarousels(direction) {
    const row1 = document.getElementById('carousel-row-1');
    const row2 = document.getElementById('carousel-row-2');
    const scrollValue = direction === 'next' ? scrollAmount : -scrollAmount;

    if (row1) row1.scrollBy({ left: scrollValue, behavior: 'smooth' });
    if (row2) row2.scrollBy({ left: scrollValue, behavior: 'smooth' });
}

// Os botÃµes agora rolam AMBAS as linhas ao mesmo tempo para manter o sincronismo
if (prevBtn) {
    prevBtn.addEventListener('click', () => scrollCarousels('prev'));
}
if (nextBtn) {
    nextBtn.addEventListener('click', () => scrollCarousels('next'));
}


/* ================= Abrir Modal ================= */
function openModal(id) {
Â  const m = data.find(x => x.id === id);
Â  if (!m) return;

Â  document.getElementById('modalName').textContent = m.name;
Â  document.getElementById('modalDetails').textContent = `${m.city} â€¢ ${m.age} anos â€¢ ${m.height}cm`;
Â  // Adicionei m.bio Ã  variÃ¡vel modalDetails, pois nÃ£o tinha no seu cÃ³digo.
Â  document.getElementById('modalBio').textContent = m.bio || 'DescriÃ§Ã£o nÃ£o disponÃ­vel.';
Â  document.getElementById('modalTags').innerHTML = m.tags.map(t => `<div class='tag'>${t}</div>`).join('');
Â  document.getElementById('modalImg').style.backgroundImage = `url(${m.thumb})`;

Â  modal.style.display = 'flex';
}

/* ================= Fechar Modal ================= */
function closeModal() {
Â  modal.style.display = 'none';
}

/* ================= Eventos ================= */
// Abrir modal ao clicar no CARD ou no botÃ£o "Ver"
document.addEventListener('click', e => {
    // Tenta encontrar o botÃ£o 'Ver'
    const btn = e.target.closest('button[data-id]');
    if (btn) {
        const id = Number(btn.dataset.id);
        openModal(id);
        return;
    }
    
    // ðŸš¨ NOVO: Tenta encontrar o CARD inteiro
    const card = e.target.closest('.card');
    if (card) {
        // Isso assume que o data-id estÃ¡ no card tambÃ©m, o que Ã© bom!
        const id = Number(card.dataset.id); 
        openModal(id);
    }
});

/* ================= Menu Hamburger ================= */
const hamburger = document.getElementById('hamburger');
const navMobile = document.querySelector('.main-nav'); // Use a classe correta do seu HTML
if (hamburger && navMobile) {
    hamburger.addEventListener('click', () => {
Â        navMobile.classList.toggle('active');
    });
}


/* ================= InicializaÃ§Ã£o ================= */
function init() {
    renderTwoRows(); // CRÃTICO: Chama a nova funÃ§Ã£o de renderizaÃ§Ã£o
    renderShorts();
    initMap(); // Chama a inicializaÃ§Ã£o do mapa
}

// Inicializar Mapa (separado para evitar problemas de carregamento)
function initMap() {
    // Verifica se o elemento 'map' existe antes de tentar inicializar
    if (!document.getElementById('map')) {
        console.warn("Elemento #map nÃ£o encontrado. Pulando a inicializaÃ§Ã£o do mapa.");
        console.log("Mapa Leaflet inicializado com sucesso.");
        return;
    }
    
    // Assegura que L (Leaflet) estÃ¡ disponÃ­vel
    if (typeof L === 'undefined') {
        console.error("Leaflet (L) nÃ£o carregado. Verifique o link CSS/JS.");
        return;
    }

    const map = L.map('map').setView([-30.5, -52.5], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    // Adicionar marcadores para cada modelo (Certifique-se de que os dados tenham lat/lng)
    data.filter(p => p.lat && p.lng).forEach(p => {
        const marker = L.marker([p.lat, p.lng]).addTo(map);
        marker.bindPopup(`
            <b>${p.name}</b><br>
            ${p.city}<br>
            <img src='${p.thumb}' width='100' style='margin-top:5px;border-radius:8px;'><br>
            <button onclick='openModal(${p.id})' style='margin-top:5px;background:#c8102e;color:white;border:0;padding:5px 10px;border-radius:6px;cursor:pointer;'>Ver perfil</button>
        `);
    });
}

// Chama a funÃ§Ã£o de inicializaÃ§Ã£o apÃ³s o DOM carregar
window.onload = init;


/* ================= Fim do script.js ================= */
